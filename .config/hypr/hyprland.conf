##########################################################
#  | |__  _   _  ___| | ____      _____  _ __| | _____   #
#  | '_ \| | | |/ __| |/ /\ \ /\ / / _ \| '__| |/ / __|  #
#  | |_) | |_| | (__|   <  \ V  V / (_) | |  |   <\__ \  #
#  |_.__/ \__,_|\___|_|\_\  \_/\_/ \___/|_|  |_|\_\___/  #
#                                                        #
#             https://github.com/kbuckleys/              #
##########################################################

defaults {
    $MOD = SUPER
    $menu = rofi -show drun
    $term = kitty
    $web = firefox
    $sysmon = btop
    $editor = nvim
    $fman = thunar
}

rules {
    env = GDK_BACKEND,wayland,x11,*
    env = QT_QPA_PLATFORM,wayland;xcb
    env = QT_STYLE_OVERRIDE,kvantum
    env = SDL_VIDEODRIVER,wayland
    env = MOZ_ENABLE_WAYLAND,1
    env = ELECTRON_OZONE_PLATFORM_HINT,wayland
    env = OZONE_PLATFORM,wayland
    env = EDITOR, nvim
}

xwayland {
    force_zero_scaling = true
}

cursor {
    env = HYPRCURSOR_THEME,MacTahoe-cursors
    env = HYPRCURSOR_SIZE,24
    env = XCURSOR_THEME,MacTahoe-cursors
    env = XCURSOR_SIZE,24
}

monitors {
    monitor=,preferred,auto,auto
    monitor=HDMI-A-1,1920x1080@100,0x0,1
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

ecosystem {
    no_update_news = false
    no_donation_nag = true
}

startup {
    exec-once = ~/.config/hypr/xdg-portal-hyprland
    exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
    exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
    exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
    exec-once = wl-paste --type text --watch cliphist store
    exec-once = wl-paste --type image --watch cliphist store
    exec-once = sleep 1 && killall nm-applet
    exec-once = swww-daemon
    exec-once = waybar
    exec-once = dunst
}

input {
    kb_layout = us
    repeat_rate = 25
    repeat_delay = 300
    follow_mouse = 1
    sensitivity = -0.5
    scroll_factor = 1
    accel_profile = flat
    resolve_binds_by_sym = 1
}

decoration {
    rounding = 0
    dim_special = 0.7
    shadow {
        enabled = false
        sharp = false
        range = 20
        render_power = 2
        color = rgba(155,191,191,0.20)
        color_inactive = rgba(0,0,0,0)
    }
    blur { 
        enabled = true
        new_optimizations = on
        ignore_opacity = on
        size = 3
        passes = 6
        vibrancy = 0.1696
    }
}

general {
    gaps_in = -1, -1, -1, -1
    gaps_out = -1, -1, -1, -1
    border_size = 1
    col.active_border = rgba(155,191,191,0.1)
    col.inactive_border = rgba(155,191,191,0.1)
    layout = dwindle
}

dwindle {
    pseudotile = yes
    preserve_split = yes
    special_scale_factor = 0.960
}

animations {
    enabled = yes
    first_launch_animation = true
    workspace_wraparound = false

    bezier = easeOutQuint, 0.23, 1, 0.32, 1
    bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1
    bezier = linear, 0, 0, 1, 1
    bezier = almostLinear, 0.5, 0.5, 0.75, 1.0
    bezier = quick, 0.15, 0, 0.1, 1

    animation = specialWorkspace, 1, 1, linear, slidevert
    animation = workspaces, 1, 1.5, easeInOutCubic
    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 2, easeOutQuint
    animation = windowsIn, 1, 2, easeOutQuint, popin 87%
    animation = windowsOut, 1, 2, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
}

windowrules {
    windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
    windowrule = suppressevent maximize, class:.*
    windowrule = opacity 0.95 0.9, class:.*
    windowrule = bordercolor rgba(b6e0a499), floating:1
    windowrule = bordercolor rgba(c8a4e099), fullscreen:1
    windowrule = float, title:File Operation Progress
    windowrule = float, title:Rename.*$
    windowrule = float, class:waypaper
    windowrule = float, class:Wiremix
    windowrule = size 36% 50%, class:Wiremix
    windowrule = size 70% 63%, class:waypaper
    windowrule = float, initialTitle:Friends List
    windowrule = float, class:xdg-desktop-portal-gtk
}

layerrules {
    layerrule = dimaround, $menu
}

binds {
    pass_mouse_when_bound = false

    bind = $MOD SHIFT, S, exec, $term -e $sysmon
    bind = $MOD, C, exec, $term
    bind = $MOD, Q, killactive,
    bind = $MOD SHIFT, Q, forcekillactive
    bind = $MOD SHIFT, L, exit,
    bind = $MOD, B, exec, $web
    bind = $MOD, E, exec, $fman
    bind = $MOD, F, togglefloating,
    bind = $MOD, SPACE, exec, $menu
    bind = $MOD, N, exec, $term -e $editor ~/Documents/notes
    bind = $MOD, ESCAPE, exec, cliphist list | rofi -dmenu | cliphist decode | wl-copy
    bind = $MOD, W, pseudo,
    bind = $MOD, X, togglesplit
    bind = $MOD, Z, fullscreen, 1
    bind = $MOD, P, exec, hyprpicker

    bind = $MOD, PRINT, exec, hyprshot -m region
    bind = $MOD SHIFT, PRINT, exec, hyprshot -m window
    bind = ,PRINT, exec, hyprshot -m output -m HDMI-A-1

    bind = $MOD, TAB, togglespecialworkspace
    bind = $MOD, 1, workspace, 1
    bind = $MOD, 2, workspace, 2
    bind = $MOD, 3, workspace, 3
    bind = $MOD, 4, workspace, 4
    bind = $MOD, 5, workspace, 5
    bind = $MOD, 6, workspace, 6
    bind = $MOD, 7, workspace, 7
    bind = $MOD, 8, workspace, 8
    bind = $MOD, 9, workspace, 9

    bind = $MOD SHIFT, TAB, movetoworkspace, special
    bind = $MOD SHIFT, 1, movetoworkspace, 1
    bind = $MOD SHIFT, 2, movetoworkspace, 2
    bind = $MOD SHIFT, 3, movetoworkspace, 3
    bind = $MOD SHIFT, 4, movetoworkspace, 4
    bind = $MOD SHIFT, 5, movetoworkspace, 5
    bind = $MOD SHIFT, 6, movetoworkspace, 7
    bind = $MOD SHIFT, 7, movetoworkspace, 7
    bind = $MOD SHIFT, 8, movetoworkspace, 8
    bind = $MOD SHIFT, 9, movetoworkspace, 10

    bind = $MOD, mouse_down, workspace, e+1
    bind = $MOD, mouse_up, workspace, e-1
    bindm = $MOD, mouse:272, movewindow
    bindm = $MOD, mouse:273, resizewindow

    bind = $MOD, left, movefocus, l
    bind = $MOD, right, movefocus, r
    bind = $MOD, up, movefocus, u
    bind = $MOD, down, movefocus, d

    bind = $MOD SHIFT, left, movewindow, l
    bind = $MOD SHIFT, right, movewindow, r
    bind = $MOD SHIFT, up, movewindow, u
    bind = $MOD SHIFT, down, movewindow, d

    binde = $MOD CTRL, left, resizeactive, -50 0
    binde = $MOD CTRL, right, resizeactive, 50 0
    binde = $MOD CTRL, up, resizeactive, 0 -50
    binde = $MOD CTRL, down, resizeactive, 0 50

    bind = $MOD SHIFT, F11, exec, playerctl play-pause
    bind = $MOD SHIFT, F10, exec, playerctl previous
    bind = $MOD SHIFT, F12, exec, playerctl next

    binde = $MOD, F12, exec,pamixer -i 5
    binde = $MOD, F11, exec,pamixer -d 5
    bind = $MOD, F10, exec,pamixer -t
    bind = $MOD, F9, exec, $term --class=Wiremix -e wiremix

    binde = $MOD CTRL, equal, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
    binde = $MOD CTRL, minus, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')
    binde = $MOD CTRL, KP_ADD, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 1.1')
    binde = $MOD CTRL, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 0.9) | if . < 1 then 1 else . end')
    bind = $MOD CTRL, 0, exec, hyprctl -q keyword cursor:zoom_factor 1
    
    bind = $MOD CTRL, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '.float * 0.9')
    bind = $MOD CTRL, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor -j | jq '(.float * 1.1) | if . < 1 then 1 else . end')
    bind = $MOD CTRL, mouse:274, exec, hyprctl -q keyword cursor:zoom_factor 1
}
